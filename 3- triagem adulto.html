<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anamnese Simplificada - MissionCare Plus</title>

    <!-- Importação de Fontes e Tailwind CSS -->
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Lexend:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900">
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <link rel="stylesheet" href="style.css">
    <!-- Biblioteca para gerar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>


    <style>
        .form-checkbox, .form-radio {
            color: var(--primary-color);
            border-color: #d1d5db;
        }
        .form-checkbox:checked, .form-radio:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .form-checkbox:focus, .form-radio:focus {
            --tw-ring-color: rgba(var(--primary-color-rgb), 0.5);
            box-shadow: 0 0 0 2px var(--tw-ring-color);
        }
        /* Estilos para a aba ativa */
        .tab-button.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Container da Aplicação -->
    <div id="app-container" class="relative flex size-full min-h-screen flex-col bg-gray-50">

        <!-- TELA DE FORMULÁRIO (ANAMNESE) -->
        <div id="form-screen">
            <header class="sticky top-0 z-10 flex items-center bg-gray-50/80 p-4 pb-3 backdrop-blur-sm border-b border-gray-200">
                <a href="javascript:location.reload()" class="text-[#0e181b] p-2 -ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>
                </a>
                <h1 class="text-[#0e181b] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-8">Anamnese Simplificada</h1>
            </header>

            <main class="flex-grow pb-28">
                <div class="m-4 p-4 bg-red-100 border-l-4 border-red-500 text-red-800 rounded-r-lg">
                    <div class="flex items-center">
                        <svg class="w-6 h-6 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z" /></svg>
                        <strong class="font-bold">ATENÇÃO: EM CASO DE EMERGÊNCIA MÉDICA GRAVE, PROCURE AJUDA IMEDIATAMENTE.</strong>
                    </div>
                    <ul class="list-disc list-inside mt-2 text-sm">
                        <li>Perda de consciência, dificuldade respiratória severa, dor forte no peito.</li>
                        <li>Fraqueza súbita, sangramento intenso, convulsões.</li>
                    </ul>
                </div>

                <form id="anamnesis-form" class="space-y-6">
                    <div class="p-4 space-y-5">
                        <h2 class="text-[#0e181b] text-xl font-bold">Motivo da Consulta</h2>
                        <div>
                            <label for="problema-principal" class="block text-base font-medium text-gray-700 mb-1">1. Qual o principal problema ou sintoma?</label>
                            <textarea id="problema-principal" placeholder="Ex: Dor de cabeça, Febre, Tosse..." class="form-textarea w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3" rows="2"></textarea>
                        </div>
                        <div>
                            <label for="inicio-sintomas" class="block text-base font-medium text-gray-700 mb-1">2. Quando exatamente os sintomas começaram?</label>
                            <input type="text" id="inicio-sintomas" placeholder="Ex: Há 3 dias, ontem à noite" class="form-input w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3"/>
                        </div>
                        <fieldset>
                            <legend class="text-base font-medium text-gray-700 mb-2">3. Antes disso, você estava se sentindo perfeitamente bem?</legend>
                            <div class="flex items-center gap-x-6">
                                <label class="flex items-center gap-2"><input type="radio" name="sentindo-bem" value="Sim" class="form-radio h-4 w-4"> Sim</label>
                                <label class="flex items-center gap-2"><input type="radio" name="sentindo-bem" value="Não" class="form-radio h-4 w-4"> Não</label>
                            </div>
                        </fieldset>
                        <div>
                            <label for="fator-desencadeante" class="block text-base font-medium text-gray-700 mb-1">4. Houve algum fator que você acredita ter desencadeado o problema?</label>
                            <textarea id="fator-desencadeante" placeholder="Descreva qualquer evento ou circunstância" class="form-textarea w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3" rows="2"></textarea>
                        </div>
                        <fieldset>
                            <legend class="text-base font-medium text-gray-700 mb-2">5. Os sintomas estão melhorando, piorando ou permanecem os mesmos?</legend>
                            <div class="flex flex-col sm:flex-row gap-y-2 gap-x-4">
                                <label class="flex items-center gap-2"><input type="radio" name="progressao-sintomas" value="Melhorando" class="form-radio h-4 w-4"> Melhorando</label>
                                <label class="flex items-center gap-2"><input type="radio" name="progressao-sintomas" value="Piorando" class="form-radio h-4 w-4"> Piorando</label>
                                <label class="flex items-center gap-2"><input type="radio" name="progressao-sintomas" value="Iguais" class="form-radio h-4 w-4"> Iguais</label>
                            </div>
                        </fieldset>
                        <div>
                            <label for="melhora-piora" class="block text-base font-medium text-gray-700 mb-1">6. O que melhora ou piora a sua dor/sintoma?</label>
                            <textarea id="melhora-piora" placeholder="Ex: Repouso melhora, esforço piora..." class="form-textarea w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3" rows="2"></textarea>
                        </div>
                         <div>
                            <label for="tratamento-tentado" class="block text-base font-medium text-gray-700 mb-1">7. Você já tentou algum tratamento para isso?</label>
                            <textarea id="tratamento-tentado" placeholder="Ex: Tomei Paracetamol para a febre" class="form-textarea w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="p-4 space-y-5">
                        <h2 class="text-[#0e181b] text-xl font-bold">Informações Básicas</h2>
                        <fieldset>
                            <legend class="text-base font-medium text-gray-700 mb-2">8. Possui alguma doença crônica?</legend>
                            <div class="space-y-2">
                                 <label class="flex items-center gap-3"><input type="checkbox" name="condicoes" value="Hipertensão" class="form-checkbox h-5 w-5 rounded"/> Hipertensão (Pressão alta)</label>
                                 <label class="flex items-center gap-3"><input type="checkbox" name="condicoes" value="Diabetes" class="form-checkbox h-5 w-5 rounded"/> Diabetes</label>
                                 <label class="flex items-center gap-3"><input type="checkbox" name="condicoes" value="Asma" class="form-checkbox h-5 w-5 rounded"/> Asma</label>
                                 <label class="flex items-center gap-3"><input type="checkbox" name="condicoes" value="Doença Cardíaca" class="form-checkbox h-5 w-5 rounded"/> Doença Cardíaca</label>
                                 <label class="flex items-center gap-3"><input type="checkbox" name="condicoes" value="Nenhuma" class="form-checkbox h-5 w-5 rounded"/> Nenhuma das opções</label>
                            </div>
                        </fieldset>
                        <div>
                            <label for="medicamentos" class="block text-base font-medium text-gray-700 mb-1">9. Usa algum medicamento de forma contínua? Qual(is)?</label>
                            <textarea id="medicamentos" placeholder="Ex: Losartana 50mg, Metformina..." class="form-textarea w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3" rows="2"></textarea>
                        </div>
                        <div>
                            <label for="alergias" class="block text-base font-medium text-gray-700 mb-1">10. Possui alguma alergia?</label>
                            <textarea id="alergias" placeholder="Ex: Alergia a Penicilina, camarão..." class="form-textarea w-full rounded-xl border-gray-300 bg-white focus:border-blue-500 focus:ring-blue-500 transition p-3" rows="2"></textarea>
                        </div>
                    </div>
                </form>
            </main>
            <footer class="fixed bottom-0 left-0 right-0 bg-gray-50/80 backdrop-blur-sm border-t border-gray-200">
                <div class="p-4">
                    <button id="generate-analysis-btn" type="button" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-lg text-lg font-bold text-white bg-[var(--primary-color)] hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)] transition-transform transform hover:scale-105">
                        Gerar Análise
                    </button>
                </div>
            </footer>
        </div>

        <!-- TELA DE CARREGAMENTO -->
        <div id="loading-screen" class="hidden fixed inset-0 bg-white/80 z-50 flex flex-col items-center justify-center">
            <svg class="animate-spin h-10 w-10 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="mt-4 text-lg font-semibold text-gray-700">Analisando dados...</p>
        </div>
        
        <!-- TELA DE RESULTADOS -->
        <div id="results-screen" class="hidden">
            <header class="sticky top-0 z-10 flex items-center bg-gray-50/80 p-4 pb-0 backdrop-blur-sm border-b border-gray-200">
                 <a href="javascript:location.reload()" class="text-[#0e181b] p-2 -ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>
                </a>
                <h1 class="text-[#0e181b] text-lg font-bold flex-1 text-center pr-8">Relatório da Análise</h1>
            </header>
            <main id="report-content" class="flex-grow pb-28 p-4">
                <!-- Nível de Urgência -->
                <div id="urgency-level" class="p-4 rounded-lg mb-4 text-center text-white font-bold"></div>
                
                <!-- Abas de Navegação -->
                <div class="border-b border-gray-200 mb-4">
                    <nav class="flex -mb-px">
                        <button class="tab-button active py-3 px-4 border-b-2 border-transparent text-gray-500" data-tab="orientation">Orientação</button>
                        <button class="tab-button py-3 px-4 border-b-2 border-transparent text-gray-500" data-tab="summary">Tabela Resumo</button>
                    </nav>
                </div>

                <!-- Conteúdo das Abas -->
                <div id="tab-content">
                    <div id="orientation-content"></div>
                    <div id="summary-content" class="hidden"></div>
                </div>
            </main>
            <footer class="fixed bottom-0 left-0 right-0 bg-gray-50/80 backdrop-blur-sm border-t border-gray-200">
                <div class="p-4 flex gap-4">
                    <button id="whatsapp-btn" class="w-full flex items-center justify-center py-3 px-4 border border-transparent rounded-full shadow-lg text-lg font-bold text-white bg-green-500 hover:bg-green-600">
                        <svg class="w-6 h-6 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16.6 14.2c-.2-.1-1.5-.7-1.7-.8-.2-.1-.4-.1-.6.1-.2.2-.6.8-.8 1-.1.2-.3.2-.5.1-.2-.1-1-.4-1.9-1.2-.7-.6-1.2-1.4-1.3-1.6-.1-.2 0-.4.1-.5.1-.1.2-.2.4-.4.1-.1.2-.2.3-.4.1-.2.1-.3 0-.4-.1-.1-1.7-4.1-1.9-4.5-.2-.4-.4-.4-.6-.4h-.4c-.2 0-.5.2-.6.4-.2.2-.8.8-.8 1.9 0 1.2.8 2.2 1 2.4.1.2 1.5 2.3 3.7 3.2.5.2.9.4 1.2.5.5.2 1 .1 1.3-.1.4-.2.8-.9.9-1.7.1-.8.1-1.5 0-1.7-.1-.2-.3-.3-.5-.4zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z"/></svg>
                        WhatsApp
                    </button>
                    <button id="pdf-btn" class="w-full flex items-center justify-center py-3 px-4 border border-gray-300 rounded-full shadow-lg text-lg font-bold text-gray-700 bg-white hover:bg-gray-100">
                        <svg class="w-6 h-6 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 9v4h-2v-4H9V9h2V5h2v4h2v2h-2zm4-8.5L19.5 5H17V2.5z"/></svg>
                        Gerar PDF
                    </button>
                </div>
            </footer>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Referências aos elementos da UI
    const formScreen = document.getElementById('form-screen');
    const loadingScreen = document.getElementById('loading-screen');
    const resultsScreen = document.getElementById('results-screen');
    const generateBtn = document.getElementById('generate-analysis-btn');
    const form = document.getElementById('anamnesis-form');

    // **CORREÇÃO PARA TESTE LOCAL:** A chave da API é necessária para rodar fora da plataforma.
    // Para testar localmente no VSCode, use a extensão "Live Server".
    const apiKey = 'AIzaSyAz6tEar6NJokgbEch5QLtbKL7dw_v6B3U'; 
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;

    // Evento de clique no botão "Gerar Análise"
    generateBtn.addEventListener('click', async () => {
        // 1. Coletar dados do formulário
        const formData = {
            problemaPrincipal: document.getElementById('problema-principal').value,
            inicioSintomas: document.getElementById('inicio-sintomas').value,
            sentindoBem: document.querySelector('input[name="sentindo-bem"]:checked')?.value || 'Não informado',
            fatorDesencadeante: document.getElementById('fator-desencadeante').value,
            progressaoSintomas: document.querySelector('input[name="progressao-sintomas"]:checked')?.value || 'Não informado',
            melhoraPiora: document.getElementById('melhora-piora').value,
            tratamentoTentado: document.getElementById('tratamento-tentado').value,
            condicoes: Array.from(document.querySelectorAll('input[name="condicoes"]:checked')).map(el => el.value).join(', ') || 'Nenhuma',
            medicamentos: document.getElementById('medicamentos').value,
            alergias: document.getElementById('alergias').value,
        };

        // 2. Mostrar tela de carregamento
        formScreen.style.display = 'none';
        loadingScreen.style.display = 'flex';

        // 3. Construir o prompt para a IA
        const prompt = `
            Você é o MedGemma, um assistente médico de inteligência artificial altamente especializado. Sua função é analisar os dados de uma anamnese simplificada fornecida por um missionário em uma área remota. Seu objetivo é gerar uma análise estruturada para triagem inicial. Seja preciso, baseado em evidências e cauteloso. NUNCA forneça um diagnóstico definitivo.

            **Dados do Paciente:**
            * Motivo Principal: "${formData.problemaPrincipal}"
            * Início dos Sintomas: "${formData.inicioSintomas}"
            * Estado Anterior: "${formData.sentindoBem}"
            * Fator Desencadeante: "${formData.fatorDesencadeante}"
            * Progressão: "${formData.progressaoSintomas}"
            * Fatores de Melhora/Piora: "${formData.melhoraPiora}"
            * Tratamento Tentado: "${formData.tratamentoTentado}"
            * Doenças Crônicas: "${formData.condicoes}"
            * Medicamentos Contínuos: "${formData.medicamentos}"
            * Alergias: "${formData.alergias}"

            **Sua Tarefa:**
            Gere um relatório em formato JSON com a seguinte estrutura:
            {
              "hipotese_principal": {
                "nome": "Nome da Hipótese Mais Provável",
                "descricao_leiga": "Descrição da condição.",
                "sinais_sintomas_comuns": ["lista"],
                "causas_fatores_risco": ["lista"],
                "complicacoes_possiveis": ["lista"],
                "opcoes_tratamento_geral": ["lista"],
                "sinais_alerta_quando_procurar_ajuda": ["lista"]
              },
              "diagnostico_diferencial": [
                {"nome": "Hipótese 2", "justificativa": "Motivo"},
                {"nome": "Hipótese 3", "justificativa": "Motivo"}
              ],
              "nivel_urgencia": {
                "classificacao": "Moderado",
                "justificativa": "Justificativa da urgência."
              },
              "resumo_tabular": {
                "anamnese_pontos_chave": "Resumo dos pontos chave.",
                "interpretacao_inicial": "Interpretação inicial."
              },
              "disclaimer": "Esta análise é gerada por IA para fins educacionais e de triagem inicial. Ela não substitui uma consulta médica. Na dúvida, sempre contate um profissional de saúde."
            }
        `;

        // 4. Fazer a chamada para a API Gemini
        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });

            if (!response.ok) {
                const errorBody = await response.text();
                throw new Error(`HTTP error! status: ${response.status}, body: ${errorBody}`);
            }

            const result = await response.json();
            const rawJsonText = result.candidates[0].content.parts[0].text.replace(/```json|```/g, '').trim();
            const analysisData = JSON.parse(rawJsonText);
            
            // 5. Esconder o carregamento e mostrar os resultados
            displayResults(analysisData);

        } catch (error) {
            console.error("Erro ao chamar a API Gemini:", error);
            loadingScreen.innerHTML = `<p class="text-red-500 font-bold text-center p-4">Ocorreu um erro ao gerar a análise. Verifique sua conexão ou tente novamente mais tarde.</p><button onclick="location.reload()" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded">Tentar Novamente</button>`;
        }
    });

    // Função para exibir os resultados na tela
    function displayResults(data) {
        loadingScreen.style.display = 'none';
        resultsScreen.style.display = 'block';

        // Nível de Urgência
        const urgencyDiv = document.getElementById('urgency-level');
        urgencyDiv.textContent = `Nível de Urgência: ${data.nivel_urgencia.classificacao}`;
        const urgencyColors = {
            "Emergência": "bg-red-700", "Urgente": "bg-red-500", "Grave": "bg-orange-500",
            "Moderado": "bg-yellow-500", "Não Urgente": "bg-green-500"
        };
        urgencyDiv.className = `p-4 rounded-lg mb-4 text-center text-white font-bold ${urgencyColors[data.nivel_urgencia.classificacao] || 'bg-gray-500'}`;

        // Conteúdo da Aba Orientação
        const orientationContent = document.getElementById('orientation-content');
        const hp = data.hipotese_principal;
        orientationContent.innerHTML = `
            <div class="space-y-4">
                <h3 class="text-2xl font-bold text-gray-800">${hp.nome}</h3>
                <p class="text-gray-600">${hp.descricao_leiga}</p>
                
                <div><h4 class="font-semibold text-lg">Sinais e Sintomas Comuns</h4><ul class="list-disc list-inside text-gray-600">${hp.sinais_sintomas_comuns.map(s => `<li>${s}</li>`).join('')}</ul></div>
                <div><h4 class="font-semibold text-lg">Opções de Tratamento Geral</h4><ul class="list-disc list-inside text-gray-600">${hp.opcoes_tratamento_geral.map(s => `<li>${s}</li>`).join('')}</ul></div>
                <div class="p-3 bg-yellow-100 border-l-4 border-yellow-500"><h4 class="font-semibold text-lg">Sinais de Alerta (Quando procurar ajuda)</h4><ul class="list-disc list-inside text-yellow-800">${hp.sinais_alerta_quando_procurar_ajuda.map(s => `<li>${s}</li>`).join('')}</ul></div>
                <p class="text-xs italic text-gray-500 mt-4">${data.disclaimer}</p>
            </div>
        `;

        // Conteúdo da Aba Resumo
        const summaryContent = document.getElementById('summary-content');
        summaryContent.innerHTML = `
            <div class="space-y-4">
                <div><h4 class="font-semibold text-lg">Pontos-Chave da Anamnese</h4><p class="text-gray-600">${data.resumo_tabular.anamnese_pontos_chave}</p></div>
                <div><h4 class="font-semibold text-lg">Interpretação Inicial</h4><p class="text-gray-600">${data.resumo_tabular.interpretacao_inicial}</p></div>
                <div><h4 class="font-semibold text-lg">Diagnóstico Diferencial</h4><ul class="list-disc list-inside text-gray-600">${data.diagnostico_diferencial.map(d => `<li><strong>${d.nome}:</strong> ${d.justificativa}</li>`).join('')}</ul></div>
                <div><h4 class="font-semibold text-lg">Justificativa da Urgência</h4><p class="text-gray-600">${data.nivel_urgencia.justificativa}</p></div>
            </div>
        `;
        
        // Lógica das abas
        const tabButtons = document.querySelectorAll('.tab-button');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                document.getElementById('orientation-content').style.display = button.dataset.tab === 'orientation' ? 'block' : 'none';
                document.getElementById('summary-content').style.display = button.dataset.tab === 'summary' ? 'block' : 'none';
            });
        });

        // Lógica dos botões de ação
        document.getElementById('whatsapp-btn').onclick = () => {
            const reportText = `*Relatório MissionCare Plus*\n\n*Hipótese Principal:* ${hp.nome}\n*Nível de Urgência:* ${data.nivel_urgencia.classificacao}\n\n*Resumo:* ${data.resumo_tabular.anamnese_pontos_chave}\n\n*Disclaimer:* ${data.disclaimer}`;
            const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(reportText)}`;
            window.open(whatsappUrl, '_blank');
        };

        document.getElementById('pdf-btn').onclick = () => {
            const { jsPDF } = window.jspdf;
            const reportElement = document.getElementById('report-content');
            
            html2canvas(reportElement, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save("relatorio-missioncare.pdf");
            });
        };
    }
});
</script>

</body>
</html>
