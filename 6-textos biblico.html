<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renovação Diária - MissionCare Plus</title>

    <!-- Importação de Fontes e Tailwind CSS -->
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Lexend:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900">
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <link rel="stylesheet" href="style.css">

    <style>
        body {
            font-family: 'Lexend', 'Noto Sans', sans-serif;
            --primary-color: #0d9488; /* Tailwind teal-600 */
            --text-color-dark: #374151; /* gray-700 */
            --text-color-light: #6b7280; /* gray-500 */
        }
        .verse-card {
            background-size: cover;
            background-position: center;
            text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body class="bg-white">

    <!-- Container da Aplicação -->
    <div id="app-container" class="relative flex size-full min-h-screen flex-col bg-white">
        <!-- Conteúdo Principal -->
        <div>
            <header class="sticky top-0 z-10 flex items-center bg-white/90 p-4 pb-3 backdrop-blur-sm border-b border-gray-200">
                <a href="#" class="text-gray-600 hover:text-gray-900 p-2 -ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>
                </a>
                <h1 data-i18n='biblico.titulo' class="text-gray-800 text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-8">Renovação Diária</h1>
            </header>

            <main class="flex-grow pb-4">
                <div id="loading-state" class="p-4">
                     <div class="animate-pulse flex flex-col items-stretch justify-end rounded-xl pt-[132px] bg-gray-200 h-64">
                        <div class="p-4 space-y-2">
                            <div class="h-6 bg-gray-300 rounded w-3/4"></div>
                            <div class="h-6 bg-gray-300 rounded w-1/2"></div>
                            <div class="h-4 bg-gray-300 rounded w-1/4 mt-2"></div>
                        </div>
                    </div>
                </div>

                <div id="content-state" class="hidden p-4">
                    <div id="verse-card" class="verse-card flex flex-col items-stretch justify-end rounded-xl pt-[132px] min-h-[256px]">
                        <div class="w-full bg-gradient-to-t from-black/60 to-transparent p-4 rounded-b-xl">
                            <p id="verse-text" class="text-white text-2xl font-bold leading-tight"></p>
                            <p id="verse-reference" class="text-white text-base font-medium leading-normal mt-1"></p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', async () => {
    
    const loadingState = document.getElementById('loading-state');
    const contentState = document.getElementById('content-state');
    const verseCard = document.getElementById('verse-card');
    const verseText = document.getElementById('verse-text');
    const verseReference = document.getElementById('verse-reference');

    const apiKey = 'AIzaSyAz6tEar6NJokgbEch5QLtbKL7dw_v6B3U'; 
    const textApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;
    
    const verses = [
        "Jó 21:24 (NTLH) com saúde e cheios de força.",
        "Provérbios 4:22 (NTLH) Elas darão vida longa e saúde a quem entendê-las.",
        "Salmos 73:4 (NTLH) Os maus não sofrem; eles são fortes e cheios de saúde.",
        "Provérbios 1:12 (NTLH) Estarão vivas e com saúde quando as encontrarmos, mas nós acabaremos com elas.",
        "Provérbios 17:22 (NTLH) A alegria faz bem à saúde; estar sempre triste é morrer aos poucos.",
        "Lucas 5:31 (NTLH) Jesus respondeu: — Os que têm saúde não precisam de médico, mas sim os doentes.",
        "Salmos 41:3 (NTLH) Quando estiverem doentes, de cama, o Senhor os ajudará e lhes dará saúde novamente.",
        "Provérbios 14:30 (NTLH) A paz de espírito dá saúde ao corpo, mas a inveja destrói como câncer.",
        "Jó 33:25 (NTLH) Então ele terá saúde novamente, e o seu corpo será forte como era na juventude.",
        "Deuteronômio 34:7 (NTLH) Moisés tinha cento e vinte anos quando morreu, mas ainda enxergava bem e tinha boa saúde.",
        "Provérbios 16:24 (NTLH) As palavras bondosas são como o mel: doces para o paladar e boas para a saúde.",
        "Salmos 6:2 (NTLH) Tem compaixão de mim, pois me sinto fraco. Dá-me saúde, pois o meu corpo está abatido,",
        "Mateus 9:12 (NTLH) Jesus ouviu a pergunta e respondeu: — Os que têm saúde não precisam de médico, mas sim os doentes.",
        "Salmos 38:19 (NTLH) No entanto, os meus inimigos estão fortes e com saúde, e há muita gente que me odeia sem motivo.",
        "Tiago 5:15 (NTLH) Essa oração, feita com fé, salvará a pessoa doente. O Senhor lhe dará saúde e perdoará os pecados que tiver cometido.",
        "Salmos 105:37 (NTLH) Então Deus tirou os israelitas daquele país, e eles levaram consigo prata e ouro. Todos eram fortes e cheios de saúde.",
        "Salmos 41:10 (NTLH) Ó Senhor Deus, tem compaixão de mim e me dá saúde novamente para que eu dê aos meus inimigos o que merecem!",
        "Lucas 15:27 (NTLH) — O empregado respondeu: “O seu irmão voltou para casa vivo e com saúde. Por isso o seu pai mandou matar o bezerro gordo.”",
        "3João 1:2 (NTLH) Meu querido amigo, tenho pedido a Deus que você vá bem em tudo e que esteja com boa saúde, assim como está bem espiritualmente.",
        "Jeremias 33:6 (NTLH) Mas eu curarei esta cidade e o seu povo e novamente lhe darei saúde. E farei com que tenha tempos de paz e segurança.",
        "Lamentações 4:7 (NTLH) Os nossos príncipes eram puros como o leite e sem manchas como a neve; eram fortes, cheios de vigor, e os seus olhos brilhavam de saúde.",
        "Jeremias 30:17 (NTLH) Os seus inimigos dizem: ‘ Sião é desprezada, ninguém se importa com ela!’ Mas eu lhe darei saúde novamente e curarei as suas feridas. Eu, o Senhor , estou falando.”",
        "Atos 23:30 (NTLH) Quando fui informado de que havia um plano para matá-lo, resolvi mandá-lo ao senhor. E disse para aqueles judeus que fizessem as acusações na sua presença. “Saúde. “Cláudio Lísias.”",
        "Isaías 38:16 (NTLH) “Ó Senhor, é por causa das coisas que tu fazes que todos nós vivemos; e eu também estou vivo por causa delas. Dá-me saúde a fim de que eu viva!",
        "Marcos 2:17 (NTLH) Jesus ouviu a pergunta e disse aos mestres da Lei: — Os que têm saúde não precisam de médico, mas sim os doentes. Eu vim para chamar os pecadores e não os bons.",
        "Romanos 12:12 Alegrem-se na esperança, sejam pacientes na tribulação, perseverem na oração."
    ];

    async function fetchWithTimeout(resource, options = {}, timeout = 15000) {
        const controller = new AbortController();
        const id = setTimeout(() => controller.abort(), timeout);
        const response = await fetch(resource, {
            ...options,
            signal: controller.signal  
        });
        clearTimeout(id);
        return response;
    }

    async function getDailyContent() {
        try {
            const versePrompt = `
                Você é um assistente teológico. Analise a lista de versículos abaixo e escolha UM aleatoriamente.
                
                Lista de Versículos:
                ${verses.join('\n')}

                Responda APENAS em formato JSON com a seguinte estrutura:
                {
                  "text": "O texto do versículo, sem a referência",
                  "reference": "Apenas a referência, como 'Romanos 12:12'"
                }
            `;
            
            const textResponse = await fetchWithTimeout(textApiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: versePrompt }] }] })
            });

            if (!textResponse.ok) throw new Error('Falha ao buscar o versículo.');

            const textResult = await textResponse.json();
            const rawJsonText = textResult.candidates[0].content.parts[0].text.replace(/```json|```/g, '').trim();
            const content = JSON.parse(rawJsonText);
            
            const verse = content.text || "A alegria faz bem à saúde; estar sempre triste é morrer aos poucos.";
            const reference = content.reference || "Provérbios 17:22 (NTLH)";

            verseText.textContent = `"${verse}"`;
            verseReference.textContent = reference;

            // **CORREÇÃO:** Trocado Unsplash por Picsum Photos, que é mais estável.
            const imageUrl = `https://picsum.photos/800/600?random=${new Date().getTime()}`;
            verseCard.style.backgroundImage = `linear-gradient(0deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 100%), url('${imageUrl}')`;

            loadingState.style.display = 'none';
            contentState.style.display = 'block';

        } catch (error) {
            console.error("Erro ao buscar conteúdo diário:", error);
            // Fallback para um versículo padrão em caso de erro de API ou parsing.
            verseText.textContent = '"A alegria faz bem à saúde; estar sempre triste é morrer aos poucos."';
            verseReference.textContent = 'Provérbios 17:22 (NTLH)';
            verseCard.style.backgroundImage = `linear-gradient(0deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 100%), url('https://picsum.photos/800/600?random=${new Date().getTime()}')`;
            loadingState.style.display = 'none';
            contentState.style.display = 'block';
        }
    }

    getDailyContent();

});
</script>

</body>
</html>
